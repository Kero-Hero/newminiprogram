# 智能物联网设备管理小程序

一个功能完整的微信小程序，用于管理智能物联网设备，包含设备控制、数据监控、日志管理等功能。

## 📋 项目结构

```
newminiprogram/
├── app.js                  # 全局应用逻辑
├── app.json                # 全局配置
├── app.wxss                # 全局样式
├── pages/                  # 页面目录
│   ├── index/              # 首页
│   ├── device/             # 设备管理 ✅
│   ├── data/               # 数据管理 ✅
│   ├── log/                # 日志管理 ✅
│   ├── profile/            # 个人中心
│   └── login/              # 登录页面
├── utils/                  # 工具函数
└── README.md               # 项目文档
```

## 🚀 功能特性

### 1. 首页 📊
- ✅ 欢迎界面和用户信息展示
- ✅ 快捷功能入口
- ✅ 系统概览统计
- ✅ 最新日志快速查看

### 2. 设备管理 📱
- ✅ 设备列表展示（在线/离线状态）
- ✅ 设备搜索和筛选功能
- ✅ 设备绑定和解绑操作
- ✅ 设备详情查看
- ✅ 实时状态监控
- ✅ 设备统计信息

**API集成：**
- `GET /devices/my_devices` - 获取用户设备列表
- `GET /devices/my_devices/{device_id}` - 获取设备详细信息
- `POST /devices/{device_id}/bind` - 绑定设备
- `POST /devices/{device_id}/unbind` - 解绑设备

### 3. 数据管理 📈
- ✅ 设备数据列表展示
- ✅ 时间范围筛选（支持自定义和快捷选择）
- ✅ 数据搜索和过滤
- ✅ 数据详情查看
- ✅ 统计信息展示
- ✅ 分页加载和下拉刷新

**API集成：**
- `GET /data/my_data/?before&after=` - 获取设备数据（支持时间筛选）

**功能亮点：**
- 支持多种数据类型（温度、湿度、烟雾、安全等）
- 智能状态判断（正常、警告、错误）
- 灵活的时间筛选（今天、最近7天、最近30天）
- 数据导出预留接口

### 4. 日志管理 📋
- ✅ 用户操作日志和设备日志分类展示
- ✅ 日志级别筛选（信息、警告、错误、调试）
- ✅ 日期筛选和关键词搜索
- ✅ 日志详情查看
- ✅ 实时统计信息
- ✅ 分页加载和刷新功能

**API集成：**
- `GET /logs/my_logs/` - 获取用户操作日志
- `GET /logs/device/` - 获取设备操作日志

**功能亮点：**
- 双标签切换（用户日志/设备日志）
- 彩色日志级别标识
- 丰富的筛选条件
- 详细的日志信息展示

### 5. 个人中心 👤
- ✅ 用户信息展示
- ✅ 微信登录功能
- ✅ 功能菜单导航
- ✅ 退出登录

### 6. 登录功能 🔐
- ✅ 微信授权登录
- ✅ 登录状态管理
- ✅ 自动登录检查

## 🔧 技术栈

- **前端框架**：微信小程序原生开发
- **UI组件**：MasterGo组件库设计风格
- **状态管理**：小程序全局数据管理
- **网络请求**：封装的HTTP请求工具
- **样式方案**：WXSS + 工具类

## 📦 安装和运行

### 前置要求
- 微信开发者工具
- 微信开发者账号
- 后端服务运行在 `http://127.0.0.1:5000`

### 运行步骤

1. **下载微信开发者工具**
   - 访问 [微信开发者工具官网](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
   - 下载并安装对应版本

2. **导入项目**
   - 打开微信开发者工具
   - 选择"导入项目"
   - 项目目录选择本文件夹
   - AppID可以使用测试号或申请正式AppID

3. **配置基础库**
   - 建议使用基础库版本 2.10.0 或以上
   - 在开发者工具中设置 -> 项目设置 -> 调试基础库

4. **启动后端服务**
   - 确保后端API服务在 `http://127.0.0.1:5000` 运行
   - 主要API端点已在各模块中集成

5. **编译预览**
   - 点击"编译"按钮
   - 在开发者工具中预览
   - 可以使用真机调试功能

## 🌐 API接口

### 认证相关
- `POST /auth/wechat_login` - 微信登录

### 设备管理
- `GET /devices/my_devices` - 获取设备列表
- `GET /devices/my_devices/{device_id}` - 获取设备详情
- `POST /devices/{device_id}/bind` - 绑定设备
- `POST /devices/{device_id}/unbind` - 解绑设备

### 数据管理
- `GET /data/my_data/?before&after=` - 获取设备数据

### 日志管理
- `GET /logs/my_logs/` - 获取用户日志
- `GET /logs/device/` - 获取设备日志

## 🎨 设计特色

- **现代化UI**：采用卡片式设计，清晰的层次结构
- **响应式布局**：适配不同屏幕尺寸
- **交互动画**：流畅的页面转场和操作反馈
- **状态指示**：清晰的加载、成功、错误状态展示
- **用户体验**：直观的操作流程和友好的错误提示

## 📱 页面截图

### 主要功能页面
- 首页：系统概览和快捷操作
- 设备管理：设备列表、状态监控、操作管理
- 数据管理：数据展示、筛选查询、统计分析
- 日志管理：日志分类、级别筛选、详情查看
- 个人中心：用户信息、功能设置

## 🔮 后续开发计划

- [ ] 设备控制面板
- [ ] 数据图表展示
- [ ] 消息推送功能
- [ ] 设备分组管理
- [ ] 数据导出功能
- [ ] 多语言支持

## 📄 开发说明

### 模拟数据
项目包含完整的模拟数据，即使后端服务不可用也能正常展示功能：
- 设备列表模拟数据
- 传感器数据模拟
- 用户和设备日志模拟

### 错误处理
所有API调用都包含了完善的错误处理：
- 网络错误回退到模拟数据
- 用户友好的错误提示
- 登录状态检查和跳转

### 性能优化
- 分页加载减少内存占用
- 防抖搜索提升用户体验
- 懒加载和按需更新

## 🤝 贡献指南

1. Fork本项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request

## 📞 支持与反馈

如有问题或建议，欢迎提交Issue或联系开发团队。

---

**开发状态**: 🟢 活跃开发中
**版本**: v1.0.0
**最后更新**: 2024年1月 